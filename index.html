<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=, initial-scale=1.0" />
		<link rel="stylesheet" href="style.css" />
		<link rel="stylesheet" href="https://mdbcdn.b-cdn.net/wp-content/themes/mdbootstrap4/docs-app/css/dist/mdb5/standard/core.min.css" />
		<link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" />
		<title>Grades</title>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
		<link rel="apple-touch-icon" sizes="180x180" href="favicons/apple-touch-icon.png" />
		<link rel="icon" type="image/png" sizes="32x32" href="favicons/favicon-32x32.png" />
		<link rel="icon" type="image/png" sizes="16x16" href="favicons/favicon-16x16.png" />
		<link rel="manifest" href="favicons/site.webmanifest" />
		<link rel="mask-icon" href="favicons/safari-pinned-tab.svg" color="#5bd594" />
		<meta name="msapplication-TileColor" content="#00aba9" />
		<meta name="theme-color" content="#ffffff" />
	</head>
	<body>
		<form action="" id="loginForm">
			<section class="vh-100 gradient-custom">
				<div class="container py-5 h-100">
					<div class="row d-flex justify-content-center align-items-center h-100">
						<div class="col-12 col-md-8 col-lg-6 col-xl-5">
							<div class="card bg-dark text-white" style="border-radius: 1rem">
								<div class="card-body p-5 text-center">
									<div class="mb-md-5 mt-md-4 pb-5">
										<h2 class="fw-bold mb-1 text-uppercase">Login</h2>
										<hr />
										<div class="container bootstrap snippets bootdey">
											<div class="row">
												<div class="col-lg-12">
													<div class="main-box no-header clearfix">
														<div class="main-box-body clearfix">
															<div class="table-responsive">
																<table class="table user-list">
																	<tbody></tbody>
																</table>
															</div>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
									<div>
										<p class="mb-0">Add new account? <a href="sign" class="text-white-50">Click here</a></p>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</section>
		</form>

		<div class="BeforeLogin">
			<tr class="trClass">
				<td>
					<h4 class="fw-bold mb-1 text-white Name">Nom Prenom</h4>
					<span class="text-white-50">last modified 01.11.2023</span>
				</td>
			</tr>
		</div>
	</body>

	<script>
		var data = JSON.parse(localStorage.getItem('data'));

		$('.BeforeLogin').hide();

		var tbody = $('tbody');
		var nextTbody;

		if (data != null) {
			for (var person in data) {
				var clonedRow = $('.BeforeLogin').clone();

				clonedRow.find('.Name').text(`${data[person]['name']} ${data[person]['lastname']}`);
				clonedRow.find('.text-white-50').text('last modified ' + data[person]['modified']);

				console.log(data[person]['status']);

				color = ""

				if(data[person]['status'] == "unsuccess"){
					color = "background-color: rgb(228, 42, 42);"
				}
				if(data[person]['status'] == "limit"){
					color = "background-color: rgb(228, 169, 42);"
				}
				

				nextTbody += `
          <tr>
            <td style="cursor: pointer; ${color}" onclick="window.location.href='main/?name=${data[person]['name']}.${data[person]['lastname']}'">
              ${clonedRow.html()}
            </td>
          </tr>`;
			}

			tbody.html(nextTbody);
		}
	</script>
</html>
